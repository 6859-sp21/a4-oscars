<!DOCTYPE html>
<meta charset="utf-8">
<link rel="shortcut icon" href="#">
Adapted from: https://www.d3-graph-gallery.com/graph/circularpacking_basic.html, 4/3/2021
<script src="https://d3js.org/d3.v4.js"></script>

<div id="main"></div>

<script>

var width = 1000
var height = 1000

var svg = d3.select("#main")
  .append("svg")
    .attr("width", 1000)
    .attr("height", 1000)

var data = []
d3.csv("oscar_nominees_with_race.csv", function(csv_data) {
    for (var i = 0; i < csv_data.length; i++) {
        if (csv_data[i].winner === "TRUE") {
           data.push(csv_data[i])
        }
    }



color = d3.scaleOrdinal(d3.schemeCategory10).domain(data.map(d => d.race));

var node = svg.append("g")
  .selectAll("circle")
  .data(data)
  .enter()
  .append("circle")
    .attr("r", 2)
    .attr("cx", width / 2)
    .attr("cy", height / 2)
    .style("fill", d => color(d.race))
    .style("fill-opacity", 1)
    .attr("stroke", d => color(d.race))
    .style("stroke-width", 4)


var simulation = d3.forceSimulation()
    .force("center", d3.forceCenter().x(width / 2).y(height / 2)) // Attraction to the center of the svg area
    .force("charge", d3.forceManyBody().strength(0.5)) // Nodes are attracted one each other of value is > 0
    .force("collide", d3.forceCollide().strength(1).radius(2).iterations(1)) // Force that avoids circle overlapping

simulation
    .nodes(data)
    .on("tick", function(d){
      node
          .attr("cx", function(d){ return d.x; })
          .attr("cy", function(d){ return d.y; })
    });
});

// Adapted from: https://www.d3-graph-gallery.com/graph/circularpacking_basic.html, 4/3/2021

</script>